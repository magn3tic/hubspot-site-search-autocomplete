!function(b,y,I){b.fn.hubspotAutocomplete=function(e){if(console.log("[Hubspot Autocomplete] - options: ",e,typeof e),e&&"string"==typeof e&&(e=JSON.parse(e)),!b.isPlainObject(e)||!e.portalId)return console.error("[Hubspot Autocomplete] - A Hubspot portal ID is required."),b.noop;var p=b.extend(!0,{},{portalId:null,accentColor:"#226db7",highlightOpacity:.25,domains:[],pathPrefix:null,pageTypes:["SITE_PAGE","BLOG_POST","LANDING_PAGE"],thumbnailImages:!0,hubDb:{table:null,query:null},resultItemLength:"LONG",truncateContent:!1,minInputValue:0,resultLimit:15,viewAllLink:"https://www.google.com/search?q=%term%",viewAllText:'View all matches for "%term%"',viewAllIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',noMatchesText:'No results found matching "%term%"',label:!1,input:{type:"text",autocomplete:"off",placeholder:"Search This Site",value:""},searchTimeout:300,searchIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',css:!0,enableLoadMore:!1},e);if(!p.portalId)return console.error("[Hubspot Autocomplete] - No PortalId option provided."),!1;var h=b("body"),n=null,l=null,r=null,a="https://api.hubapi.com/contentsearch/v2/search?",i={term:null,portalId:p.portalId,autocomplete:!0,length:p.resultItemLength,limit:p.resultLimit},c=null;function d(e){var s,t,a,n,l,r,i='.hssa-input-wrapper input[type="search"]:focus ~ .hssa-input--icon svg, ';i+='.hssa-input-wrapper input[type="text"]:focus ~ .hssa-input--icon svg,',i+=".hssa-results .hssa-viewall a:hover svg {stroke:"+e+"}",i+=".hssa-loader--icon span { background:"+e+"; }",i+=".hssa-input-label label:hover { color:"+e+"; }",i+=".hssa-results .hs-search-highlight { background:"+(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),s=a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null,t=p.highlightOpacity,"rgba("+s.r+", "+s.g+", "+s.g+", "+t+")")+" }",n=i,l=I.head||I.getElementsByTagName("head")[0],(r=I.createElement("style")).appendChild(I.createTextNode(n)),l.appendChild(r)}function o(e){return e.replace("%term%",i.term)}function u(){var e=b(this).parent().data("hssa-input-index"),s=b('[data-hssa-results-index="'+e+'"]'),t=s.find(".hssa-results");return{$outer:s,$inner:t}}function f(t,a){return{done:function(e){var s;0<e.total?(t.html(function(e){for(var s,t,a,n="<ul>",l=0;l<e.length;l++){var r=e[l],i=r.description?"<p><span>"+r.description+"<span></p>":"";n+='<li data-hssa-result-type="'+r.type+'"><a href="'+r.url+'"><div>',"BLOG_POST"===r.type&&(n+='<figure><span data-hssa-thumb="'+r.featuredImageUrl+'"></span></figure>',n+=(a=t=void 0,t=!!(s=r).publishedDate&&new Date(s.publishedDate),a='<div class="hssa-postmeta">',s.authorFullName&&(a+="<span>"+s.authorFullName+"</span>",t&&(a+='<span class="hssa-middot">&middot;</span>')),t&&(a+="<span>"+t.toLocaleDateString("en-US")+"</span>"),a+"</div>")),n+="<h4>"+e[l].title+"</h4>"+i+"</div></a></li>"}return p.viewAllLink&&(n+='<li class="hssa-viewall"><a href="'+o(p.viewAllLink)+'"><h4>',n+=o(p.viewAllText)+' <span class="hssa-viewall--icon">'+p.viewAllIcon+"</span></h4></a></li>"),n+="</ul>"}(e.results)),a.removeClass("has-empty-results").addClass("has-results"),0!==(s=t.find('figure:not([class*="load-started"])')).length&&s.each(function(e){var s=b(this),t=s.children("[data-hssa-thumb]"),a=t.data("hssa-thumb"),n=new Image;s.addClass("load-started"),n.onload=function(){t.css({backgroundImage:"url("+a+")"}),s.addClass("load-finished")},a&&(n.src=a)})):(t.html('<p class="hssa-nomatches">'+o(p.noMatchesText)+"</p>"),a.removeClass("has-results").addClass("has-empty-results")),a.removeClass("is-loading").trigger("hssa.xhrcomplete",[e])},fail:function(e,s,t){"abort"!==s&&a.addClass("has-error").trigger("hssa.xhrfail")}}}function m(e,s){var t=f(e,s);(n=b.getJSON(a+function(e){for(var s=b.param(e),t=0;t<p.pageTypes.length;t++)s+="&type="+p.pageTypes[t];return s}(i))).done(t.done),n.fail(t.fail)}function g(){null!==n&&n.abort(),l&&clearTimeout(l);var e,s,t=b(this),a=u.call(this);i.term=b.trim(t.val()),e=a.$outer,s=a.$inner,0===i.term.length?(e.removeClass("has-results has-empty-results is-loading"),s.html("")):e.addClass("is-loading"),i.term.length>p.minInputValue&&i.term!==r&&(l=window.setTimeout(function(){m(a.$inner,a.$outer)},p.searchTimeout))}function v(){u.call(this).$outer.addClass("is-focused")}function w(e){var s=e.input.offset();e.results.css({width:e.input.width(),left:s.left,top:s.top+e.input.height()})}return console.log("[Hubspot Autocomplete] - 1.0.2"),b(this).each(function(e){0<b("#hssa-input-"+e).length&&e++;var s=b(this);if(s.hasClass("has-initialized"))return!1;p.css&&d(p.accentColor);var t=s.find('input[type="text"], input[type="search"]'),a=!!t.length,n=a?t:b(function(e){var s='<input id="hssa-input-'+e+'" ';for(var t in p.input)s+=t+'="'+p.input[t]+'" ';return s+">"}(e)),l=b('<div class="hssa-results"></div>'),r=b('<div class="hssa-loader"></div>');a?s.append(l):s.prepend(n,l),r.html('<div class="hssa-loader--icon"><span></span><span></span><span></span></div>'),l.wrap('<div class="hssa-results-outer" data-hssa-results-index="'+e+'"></div>').before(r),n.wrap('<div class="hssa-input-wrapper" data-hssa-input-index="'+e+'"></div>'),p.searchIcon&&n.after('<span class="hssa-input--icon">'+p.searchIcon+"</span>").after('<span class="hssa-input-deco" style="background:'+p.accentColor+';"></span>'),p.label&&s.prepend('<div class="hssa-input-label"><label for="hssa-input-'+e+'">'+p.label+"</label></div>"),p.truncateContent&&s.addClass("hssa-truncate-content");var i,o,u={results:l.parent(".hssa-results-outer"),input:s.find(".hssa-input-wrapper")};i=s,n.on({input:g,focus:v}),i.trigger("hssa.ready").on("click",function(e){e.stopPropagation()}),b(I).on("click",function(){b(".hssa-results-outer.is-focused").removeClass("is-focused")}),(o=u).results.detach().appendTo(h),w(o),s.addClass("has-initialized"),b(y).resize(function(){var e;e=u,c&&clearTimeout(c),c=setTimeout(function(){w(e)},500)})})}}(jQuery,window,document);