!function(w,e,b){w.fn.hubspotAutocomplete=function(e){var o=w.extend(!0,{},{portalId:"",accentColor:"#226db7",domains:[],pathPrefix:null,pageTypes:["SITE_PAGE","BLOG_POST","LANDING_PAGE"],hubDb:{table:null,query:null},truncateContent:!1,minInputValue:0,resultLimit:15,viewAllLink:"https://www.culturedstone.com/search?q=%term%",viewAllText:'View all matches for "%term%"',viewAllIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',noMatchesText:'No results found matching "%term%"',label:!1,input:{type:"text",autocomplete:"off",placeholder:"Search This Site",value:""},searchTimeout:300,searchIcon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',css:!0,enableLoadMore:!1},e);if(!o.portalId)return alert("There is no Portal ID set for the hubspot search module. Enter that required field and your search bar will be working."),console.error("No PortalId option provided to the hubspot autocomplete search."),!1;w("body");var n=null,r=null,l=null,a="https://api.hubapi.com/contentsearch/v2/search?",i={portalId:o.portalId,autocomplete:!0,term:null,limit:o.resultLimit};function u(e){var s,t,a,n,r,l,i='.hssa-input-wrapper input[type="search"]:focus ~ .hssa-input--icon svg, ';i+='.hssa-input-wrapper input[type="text"]:focus ~ .hssa-input--icon svg,',i+=".hssa-results .hssa-viewall a:hover svg {stroke:"+e+"}",i+=".hssa-loader--icon span { background:"+e+"; }",i+=".hssa-results .hs-search-highlight { background:"+(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),s=a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null,t=.25,"rgba("+s.r+", "+s.g+", "+s.g+", "+t+")")+" }",n=i,r=b.head||b.getElementsByTagName("head")[0],(l=b.createElement("style")).appendChild(b.createTextNode(n)),r.appendChild(l)}function c(e){e.stopPropagation()}function h(){w(".hssa-results-outer.is-focused").removeClass("is-focused")}function p(e){return e.replace("%term%",i.term)}function d(){var e=w(this).parent().next(),s=e.find(".hssa-results");return{$outer:e,$inner:s}}function v(s,a){return{done:function(e){0<e.total?(s.html(function(e){for(var s="<ul>",t=0;t<e.length;t++){var a=e[t].description?"<p><span>"+e[t].description+"<span></p>":"";s+='<li><a href="'+e[t].url+'"><h4>'+e[t].title+"</h4>"+a+"</a></li>"}return o.viewAllLink&&(s+='<li class="hssa-viewall"><a href="'+p(o.viewAllLink)+'"><h4>',s+=p(o.viewAllText)+' <span class="hssa-viewall--icon">'+o.viewAllIcon+"</span></h4></a></li>"),s+="</ul>"}(e.results)),a.removeClass("has-empty-results").addClass("has-results")):(s.html('<p class="hssa-nomatches">'+p(o.noMatchesText)+"</p>"),a.removeClass("has-results").addClass("has-empty-results")),a.removeClass("is-loading").trigger("hssa.xhrcomplete",[e])},fail:function(e,s,t){"abort"!==s&&a.addClass("has-error").trigger("hssa.xhrfail")}}}function f(e,s){var t=v(e,s);(n=w.getJSON(a+function(e){w.params(e);for(var s=0;s<o.pageType.length;s++)o.pageType[s]}(i))).done(t.done),n.fail(t.fail)}function m(){null!==n&&n.abort(),r&&clearTimeout(r);var e,s,t=w(this),a=d.call(this);i.term=w.trim(t.val()),e=a.$outer,s=a.$inner,0===i.term.length?(e.removeClass("has-results has-empty-results is-loading"),s.html("")):e.addClass("is-loading"),i.term.length>o.minInputValue&&i.term!==l&&(r=window.setTimeout(function(){f(a.$inner,a.$outer)},o.searchTimeout))}function g(){d.call(this).$outer.addClass("is-focused")}return w(this).each(function(e){var s=w(this);if(s.hasClass("has-initialized"))return!1;o.css&&u(o.accentColor);var t,a=s.find('input[type="text"], input[type="search"]'),n=!!a.length,r=n?a:w(function(e){var s='<input id="hssa-input-'+e+'" ';for(var t in o.input)s+=t+'="'+o.input[t]+'" ';return s+">"}(e)),l=w('<div class="hssa-results"></div>'),i=w('<div class="hssa-loader"></div>');n?s.append(l):s.prepend(r,l),i.html('<div class="hssa-loader--icon"><span></span><span></span><span></span></div>'),l.wrap('<div class="hssa-results-outer"></div>').before(i),r.wrap('<div class="hssa-input-wrapper"></div>'),o.searchIcon&&r.after('<span class="hssa-input--icon">'+o.searchIcon+"</span>").after('<span class="hssa-input-deco" style="background:'+o.accentColor+';"></span>'),o.label&&s.prepend('<div class="hssa-input-label"><label for="hssa-input-'+e+'">'+o.label+"</label></div>"),o.truncateContent&&s.addClass("hssa-truncate-content"),s.addClass("has-initialized"),t=s,r.on({input:m,focus:g}),t.trigger("hssa.ready").on("click",c),w(document).on("click",h)})}}(jQuery,window,document);